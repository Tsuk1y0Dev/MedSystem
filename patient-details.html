<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç–∞–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>–ú–µ–¥–°–∏—Å—Ç–µ–º–∞</h2>
                <p>–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1</p>
            </div>
            <div class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <i>üìä</i> <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="patients.html" class="nav-item">
                    <i>üë•</i> <span class="nav-text">–ü–∞—Ü–∏–µ–Ω—Ç—ã</span>
                </a>
                <a href="staff.html" class="nav-item">
                    <i>üë®‚Äç‚öïÔ∏è</i> <span class="nav-text">–ü–µ—Ä—Å–æ–Ω–∞–ª</span>
                </a>
                <a href="schedule.html" class="nav-item">
                    <i>üìÖ</i> <span class="nav-text">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                </a>
                <a href="reports.html" class="nav-item">
                    <i>üìà</i> <span class="nav-text">–û—Ç—á—ë—Ç—ã</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <i>‚öôÔ∏è</i> <span class="nav-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">–ò–ò</div>
                    <div class="user-details">
                        <div class="user-name">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
                        <div class="user-role">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i>üö™</i> <span>–í—ã–π—Ç–∏</span>
                </button>
                <div class="clinic-name">–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1</div>
                <div id="currentDate">01.01.2023</div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <div class="main-content">
            <div class="content-header">
                <h1>–î–µ—Ç–∞–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞</h1>
                <div>
                    <button class="btn btn-outline" onclick="window.history.back()">–ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" id="printBtn">–ü–µ—á–∞—Ç—å</button>
                </div>
            </div>
            <div class="content-body">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–∞—Ü–∏–µ–Ω—Ç–µ -->
                <div class="detail-header">
                    <div class="detail-avatar">–ò–ò</div>
                    <div class="detail-info">
                        <h1 id="patientName">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á</h1>
                        <div class="detail-meta">
                            <span id="patientAge">45 –ª–µ—Ç</span> | 
                            <span id="patientPhone">+7 (912) 345-67-89</span> | 
                            <span id="patientEmail">ivanov@example.com</span>
                        </div>
                        <div class="status-badge status-available" id="patientStatus">–ê–∫—Ç–∏–≤–Ω—ã–π</div>
                    </div>
                    <div class="detail-actions">
                        <button class="btn btn-outline" id="editPatientBtn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button class="btn btn-primary" id="addAppointmentBtn">–ó–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –ø—Ä–∏—ë–º</button>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∏ -->
                <div class="detail-tabs">
                    <div class="tab active" data-tab="info">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                    <div class="tab" data-tab="medical">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞</div>
                    <div class="tab" data-tab="appointments">–ü—Ä–∏—ë–º—ã</div>
                    <div class="tab" data-tab="documents">–î–æ–∫—É–º–µ–Ω—Ç—ã</div>
                </div>

                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
                <div class="tab-content active" id="infoTab">
                    <div class="info-grid">
                        <div class="info-card">
                            <h3>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div class="info-item">
                                <span class="info-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                                <span id="patientBirthdate">15.05.1985</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–ü–æ–ª:</span>
                                <span id="patientGender">–ú—É–∂—Å–∫–æ–π</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–ê–¥—Ä–µ—Å:</span>
                                <span id="patientAddress">—É–ª. –õ–µ–Ω–∏–Ω–∞, 15, –∫–≤. 42</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                                <span id="patientRegDate">10.03.2020</span>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div class="info-item">
                                <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                                <span id="patientPhoneDetail">+7 (912) 345-67-89</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Email:</span>
                                <span id="patientEmailDetail">ivanov@example.com</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç:</span>
                                <span id="patientEmergencyContact">–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞ (+7 912 987-65-43)</span>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3>–°—Ç—Ä–∞—Ö–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div class="info-item">
                                <span class="info-label">–°—Ç—Ä–∞—Ö–æ–≤–æ–π –ø–æ–ª–∏—Å:</span>
                                <span id="patientInsurance">1234567890123456</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–°—Ç—Ä–∞—Ö–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è:</span>
                                <span id="patientInsuranceCompany">–°—Ç—Ä–∞—Ö–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è "–ó–¥–æ—Ä–æ–≤—å–µ"</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ:</span>
                                <span id="patientInsuranceValid">31.12.2024</span>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div class="info-item">
                                <span class="info-label">–õ–µ—á–∞—â–∏–π –≤—Ä–∞—á:</span>
                                <span id="patientDoctor">–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:</span>
                                <span id="patientNotes">–ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –ø–µ–Ω–∏—Ü–∏–ª–ª–∏–Ω</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="medicalTab">
                    <div class="info-grid">
                        <div class="info-card">
                            <h3>–ò—Å—Ç–æ—Ä–∏—è –±–æ–ª–µ–∑–Ω–µ–π</h3>
                            <div style="padding: 10px 0;">
                                <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: 500;">–û–†–í–ò</div>
                                    <div style="font-size: 0.9rem; color: var(--text-gray);">–î–∏–∞–≥–Ω–æ–∑: –û—Å—Ç—Ä–∞—è —Ä–µ—Å–ø–∏—Ä–∞—Ç–æ—Ä–Ω–∞—è –≤–∏—Ä—É—Å–Ω–∞—è –∏–Ω—Ñ–µ–∫—Ü–∏—è</div>
                                    <div style="font-size: 0.8rem; color: var(--text-gray);">–î–∞—Ç–∞: 15.01.2023 - 22.01.2023</div>
                                </div>
                                <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: 500;">–ì–∏–ø–µ—Ä—Ç–æ–Ω–∏—è</div>
                                    <div style="font-size: 0.9rem; color: var(--text-gray);">–î–∏–∞–≥–Ω–æ–∑: –ê—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è –≥–∏–ø–µ—Ä—Ç–µ–Ω–∑–∏—è I —Å—Ç–µ–ø–µ–Ω–∏</div>
                                    <div style="font-size: 0.8rem; color: var(--text-gray);">–î–∞—Ç–∞: —Å 10.03.2020 (—Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–µ)</div>
                                </div>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3>–ê–ª–ª–µ—Ä–≥–∏–∏</h3>
                            <div style="padding: 10px 0;">
                                <div class="status-badge status-busy" style="margin-bottom: 10px;">–ü–µ–Ω–∏—Ü–∏–ª–ª–∏–Ω</div>
                                <div class="status-badge status-busy">–ü—ã–ª—å—Ü–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π</div>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3>–ù–∞–∑–Ω–∞—á–µ–Ω–∏—è</h3>
                            <div style="padding: 10px 0;">
                                <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: 500;">–õ–∏–∑–∏–Ω–æ–ø—Ä–∏–ª</div>
                                    <div style="font-size: 0.9rem; color: var(--text-gray);">5 –º–≥, 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å</div>
                                    <div style="font-size: 0.8rem; color: var(--text-gray);">–ù–∞–∑–Ω–∞—á–∏–ª: –°–º–∏—Ä–Ω–æ–≤–∞ –û.–í., 10.03.2020</div>
                                </div>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã</h3>
                            <div style="padding: 10px 0;">
                                <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: 500;">–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏</div>
                                    <div style="font-size: 0.9rem; color: var(--text-gray);">–î–∞—Ç–∞: 15.01.2023</div>
                                    <div style="font-size: 0.8rem; color: var(--text-gray);">–†–µ–∑—É–ª—å—Ç–∞—Ç: –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã</div>
                                </div>
                                <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: 500;">–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</div>
                                    <div style="font-size: 0.9rem; color: var(--text-gray);">–î–∞—Ç–∞: 15.01.2023</div>
                                    <div style="font-size: 0.8rem; color: var(--text-gray);">–†–µ–∑—É–ª—å—Ç–∞—Ç: —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω –ø–æ–≤—ã—à–µ–Ω</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="appointmentsTab">
                    <div class="card">
                        <div class="card-header">
                            <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏—ë–º–æ–≤</h3>
                            <button class="btn btn-sm btn-accent" id="addAppointmentHistoryBtn">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—ë–º</button>
                        </div>
                        <div class="card-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>–î–∞—Ç–∞</th>
                                            <th>–í—Ä–∞—á</th>
                                            <th>–î–∏–∞–≥–Ω–æ–∑</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>15.01.2023 10:30</td>
                                            <td>–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞</td>
                                            <td>–û–†–í–ò</td>
                                            <td><span class="status-badge status-available">–ó–∞–≤–µ—Ä—à—ë–Ω</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>10.11.2022 14:15</td>
                                            <td>–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞</td>
                                            <td>–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ—Å–º–æ—Ç—Ä</td>
                                            <td><span class="status-badge status-available">–ó–∞–≤–µ—Ä—à—ë–Ω</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>05.07.2022 09:00</td>
                                            <td>–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞</td>
                                            <td>–ñ–∞–ª–æ–±—ã –Ω–∞ –≥–æ–ª–æ–≤–Ω—É—é –±–æ–ª—å</td>
                                            <td><span class="status-badge status-available">–ó–∞–≤–µ—Ä—à—ë–Ω</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø—Ä–∏—ë–º—ã</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>–î–∞—Ç–∞</th>
                                            <th>–í—Ä–∞—á</th>
                                            <th>–¢–∏–ø –ø—Ä–∏—ë–º–∞</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>20.02.2023 11:00</td>
                                            <td>–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞</td>
                                            <td>–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–∏—ë–º</td>
                                            <td><span class="status-badge status-vacation">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏</button>
                                                <button class="btn btn-sm btn-outline">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="documentsTab">
                    <div class="card">
                        <div class="card-header">
                            <h3>–î–æ–∫—É–º–µ–Ω—Ç—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞</h3>
                            <button class="btn btn-sm btn-accent" id="uploadDocumentBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</button>
                        </div>
                        <div class="card-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                            <th>–¢–∏–ø</th>
                                            <th>–î–∞—Ç–∞</th>
                                            <th>–†–∞–∑–º–µ—Ä</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–æ–≤–∏</td>
                                            <td>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑</td>
                                            <td>15.01.2023</td>
                                            <td>245 –ö–ë</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–°–∫–∞—á–∞—Ç—å</button>
                                                <button class="btn btn-sm btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>–≠–ö–ì</td>
                                            <td>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</td>
                                            <td>10.11.2022</td>
                                            <td>1.2 –ú–ë</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–°–∫–∞—á–∞—Ç—å</button>
                                                <button class="btn btn-sm btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>–í—ã–ø–∏—Å–∫–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏</td>
                                            <td>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</td>
                                            <td>05.07.2022</td>
                                            <td>356 –ö–ë</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">–°–∫–∞—á–∞—Ç—å</button>
                                                <button class="btn btn-sm btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                window.location.href = 'index.html';
                return;
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∏–∑ URL
            const urlParams = new URLSearchParams(window.location.search);
            const patientId = urlParams.get('id');

            // –î–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É)
            const patient = {
                id: 1, 
                name: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á", 
                birthdate: "1985-05-15", 
                phone: "+7 (912) 345-67-89", 
                email: "ivanov@example.com",
                address: "—É–ª. –õ–µ–Ω–∏–Ω–∞, 15, –∫–≤. 42", 
                insurance: "1234567890123456",
                insuranceCompany: "–°—Ç—Ä–∞—Ö–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è \"–ó–¥–æ—Ä–æ–≤—å–µ\"",
                insuranceValid: "2024-12-31",
                status: "active",
                registrationDate: "2020-03-10",
                notes: "–ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –ø–µ–Ω–∏—Ü–∏–ª–ª–∏–Ω",
                gender: "–ú—É–∂—Å–∫–æ–π",
                emergencyContact: "–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞ (+7 912 987-65-43)",
                doctor: "–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞"
            };

            // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
            const logoutBtn = document.getElementById('logoutBtn');
            const currentDateElement = document.getElementById('currentDate');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const printBtn = document.getElementById('printBtn');

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
            function setCurrentDate() {
                const now = new Date();
                const formattedDate = now.toLocaleDateString('ru-RU');
                currentDateElement.textContent = formattedDate;
            }

            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–∞
            function populatePatientData() {
                document.getElementById('patientName').textContent = patient.name;
                document.getElementById('patientAge').textContent = `${calculateAge(patient.birthdate)} –ª–µ—Ç`;
                document.getElementById('patientPhone').textContent = patient.phone;
                document.getElementById('patientEmail').textContent = patient.email;
                document.getElementById('patientBirthdate').textContent = formatDate(patient.birthdate);
                document.getElementById('patientGender').textContent = patient.gender;
                document.getElementById('patientAddress').textContent = patient.address;
                document.getElementById('patientRegDate').textContent = formatDate(patient.registrationDate);
                document.getElementById('patientPhoneDetail').textContent = patient.phone;
                document.getElementById('patientEmailDetail').textContent = patient.email;
                document.getElementById('patientEmergencyContact').textContent = patient.emergencyContact;
                document.getElementById('patientInsurance').textContent = patient.insurance;
                document.getElementById('patientInsuranceCompany').textContent = patient.insuranceCompany;
                document.getElementById('patientInsuranceValid').textContent = formatDate(patient.insuranceValid);
                document.getElementById('patientDoctor').textContent = patient.doctor;
                document.getElementById('patientNotes').textContent = patient.notes;
            }

            // –†–∞—Å—á–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞
            function calculateAge(birthdate) {
                const today = new Date();
                const birthDate = new Date(birthdate);
                let age = today.getFullYear() - birthDate.getFullYear();
                const monthDiff = today.getMonth() - birthDate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                
                return age;
            }

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('ru-RU');
            }

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–µ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab') + 'Tab';
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // –ü–µ—á–∞—Ç—å
            printBtn.addEventListener('click', () => {
                window.print();
            });

            // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
                window.location.href = 'index.html';
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            setCurrentDate();
            populatePatientData();
        });
    </script>
</body>
</html>