<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä—Å–æ–Ω–∞–ª - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>–ú–µ–¥–°–∏—Å—Ç–µ–º–∞</h2>
                <p>–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1</p>
            </div>
            <div class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <i>üìä</i> <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="patients.html" class="nav-item">
                    <i>üë•</i> <span class="nav-text">–ü–∞—Ü–∏–µ–Ω—Ç—ã</span>
                </a>
                <a href="staff.html" class="nav-item active">
                    <i>üë®‚Äç‚öïÔ∏è</i> <span class="nav-text">–ü–µ—Ä—Å–æ–Ω–∞–ª</span>
                </a>
                <a href="schedule.html" class="nav-item">
                    <i>üìÖ</i> <span class="nav-text">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                </a>
                <a href="reports.html" class="nav-item">
                    <i>üìà</i> <span class="nav-text">–û—Ç—á—ë—Ç—ã</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <i>‚öôÔ∏è</i> <span class="nav-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">–ò–ò</div>
                    <div class="user-details">
                        <div class="user-name" id="userName">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
                        <div class="user-role" id="userRole">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i>üö™</i> <span>–í—ã–π—Ç–∏</span>
                </button>
                <div class="clinic-name">–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1</div>
                <div id="currentDate">01.01.2023</div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <div class="main-content">
            <div class="content-header">
                <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º</h1>
                <div class="search-container">
                    <input type="text" class="search-input" id="staffSearch" placeholder="–ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...">
                    <button class="btn btn-primary" id="searchBtn">–ù–∞–π—Ç–∏</button>
                </div>
            </div>
            <div class="content-body">
                <div class="page-title">
                    <h1>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
                    <button class="btn btn-accent" id="addStaffBtn">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
                </div>

                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div class="filters">
                    <div class="filter-group">
                        <div class="filter-label">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</div>
                        <select class="form-control" id="specialtyFilter">
                            <option value="">–í—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</option>
                            <option value="therapist">–¢–µ—Ä–∞–ø–µ–≤—Ç</option>
                            <option value="surgeon">–•–∏—Ä—É—Ä–≥</option>
                            <option value="pediatrician">–ü–µ–¥–∏–∞—Ç—Ä</option>
                            <option value="cardiologist">–ö–∞—Ä–¥–∏–æ–ª–æ–≥</option>
                            <option value="neurologist">–ù–µ–≤—Ä–æ–ª–æ–≥</option>
                            <option value="nurse">–ú–µ–¥—Å–µ—Å—Ç—Ä–∞</option>
                            <option value="administrator">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <div class="filter-label">–°—Ç–∞—Ç—É—Å</div>
                        <select class="form-control" id="statusFilter">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="available">–ù–∞ —Å–º–µ–Ω–µ</option>
                            <option value="vacation">–í –æ—Ç–ø—É—Å–∫–µ</option>
                            <option value="sick">–ù–∞ –±–æ–ª—å–Ω–∏—á–Ω–æ–º</option>
                            <option value="busy">–ó–∞–Ω—è—Ç</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <div class="filter-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</div>
                        <select class="form-control" id="sortBy">
                            <option value="name">–ü–æ –∏–º–µ–Ω–∏</option>
                            <option value="specialty">–ü–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</option>
                            <option value="patients">–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <div class="filter-label">&nbsp;</div>
                        <button class="btn btn-outline" id="resetFiltersBtn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                    </div>
                </div>

                <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ -->
                <div class="table-container">
                    <table id="staffTable">
                        <thead>
                            <tr>
                                <th>–ò–º—è</th>
                                <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–ü–∞—Ü–∏–µ–Ω—Ç–æ–≤</th>
                                <th>–ö–æ–Ω—Ç–∞–∫—Ç—ã</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –¢–∞–±–ª–∏—Ü–∞ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                <div class="pagination" id="pagination">
                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>

        <!-- –í—Ç–æ—Ä–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="secondary-sidebar">
            <h2 class="stats-title">–ö–∞–¥—Ä–æ–≤—ã–π –æ–±–∑–æ—Ä</h2>
            <div class="stats-container">
                <div class="stat-card">
                    <h3>–°–≤–æ–±–æ–¥–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h3>
                    <div class="value" id="vacanciesCount">5</div>
                    <div class="trend down">-1 –∑–∞ –º–µ—Å—è—Ü</div>
                </div>
                <div class="stat-card">
                    <h3>–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å —Å–º–µ–Ω</h3>
                    <div class="value" id="shiftFillRate">78%</div>
                    <div class="trend up">+5% –∑–∞ –º–µ—Å—è—Ü</div>
                </div>
                <div class="stat-card">
                    <h3>–í—Ä–∞—á–µ–π –≤ —à—Ç–∞—Ç–µ</h3>
                    <div class="value" id="doctorsCount">24</div>
                    <div class="trend up">+2 –∑–∞ –º–µ—Å—è—Ü</div>
                </div>
                <div class="stat-card">
                    <h3>–°—Ä–µ–¥–Ω–µ–µ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –≤—Ä–∞—á–∞</h3>
                    <div class="value" id="avgPatientsPerDoctor">12.5</div>
                    <div class="trend up">+1.2 –∑–∞ –º–µ—Å—è—Ü</div>
                </div>
            </div>

            <h2 class="stats-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
            <div class="stats-container">
                <div class="stat-card">
                    <h3>–°–º–µ–Ω –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</h3>
                    <div class="value">42</div>
                </div>
                <div class="stat-card">
                    <h3>–°–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã</h3>
                    <div class="value">18</div>
                </div>
                <div class="stat-card">
                    <h3>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–µ–º—ã</h3>
                    <div class="value">156</div>
                </div>
            </div>

            <h2 class="stats-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn btn-outline" id="createScheduleBtn">–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
                <button class="btn btn-outline" id="assignDutyBtn">–ù–∞–∑–Ω–∞—á–∏—Ç—å –¥–µ–∂—É—Ä—Å—Ç–≤–æ</button>
                <button class="btn btn-outline" id="generateReportBtn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                <button class="btn btn-outline" id="updateVacanciesBtn">–û–±–Ω–æ–≤–∏—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
    <div id="addStaffModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="staffName">–§–ò–û</label>
                        <input type="text" class="form-control" id="staffName" placeholder="–í–≤–µ–¥–∏—Ç–µ –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="staffSpecialty">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</label>
                        <select class="form-control" id="staffSpecialty">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</option>
                            <option value="therapist">–¢–µ—Ä–∞–ø–µ–≤—Ç</option>
                            <option value="surgeon">–•–∏—Ä—É—Ä–≥</option>
                            <option value="pediatrician">–ü–µ–¥–∏–∞—Ç—Ä</option>
                            <option value="cardiologist">–ö–∞—Ä–¥–∏–æ–ª–æ–≥</option>
                            <option value="neurologist">–ù–µ–≤—Ä–æ–ª–æ–≥</option>
                            <option value="nurse">–ú–µ–¥—Å–µ—Å—Ç—Ä–∞</option>
                            <option value="administrator">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="staffPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" class="form-control" id="staffPhone" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="staffEmail">Email</label>
                        <input type="email" class="form-control" id="staffEmail" placeholder="–í–≤–µ–¥–∏—Ç–µ email">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="staffAddress">–ê–¥—Ä–µ—Å</label>
                    <input type="text" class="form-control" id="staffAddress" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="staffHireDate">–î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É</label>
                        <input type="date" class="form-control" id="staffHireDate">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="staffSalary">–ó–∞—Ä–ø–ª–∞—Ç–∞</label>
                        <input type="number" class="form-control" id="staffSalary" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞—Ä–ø–ª–∞—Ç—É">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="staffNotes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                    <textarea class="form-control" id="staffNotes" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelStaffBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" id="saveStaffBtn">
                    <span id="saveStaffBtnText">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                    <div class="loading hidden" id="saveStaffLoading"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="deleteStaffModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ <strong id="deleteStaffName"></strong>?</p>
                <p>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelDeleteBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-error" id="confirmDeleteBtn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
        <button class="close-notification">&times;</button>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫—Ä–µ—Å—Ç–∏–∫
        document.querySelector('.close-notification').addEventListener('click', function() {
            document.getElementById('notification').classList.remove('show');
        });

        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                window.location.href = 'index.html';
                return;
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∏–∑ localStorage –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            let staff = JSON.parse(localStorage.getItem('staff')) || [
                { 
                    id: 1, 
                    name: "–°–º–∏—Ä–Ω–æ–≤–∞ –û–ª—å–≥–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞", 
                    specialty: "–¢–µ—Ä–∞–ø–µ–≤—Ç", 
                    status: "available", 
                    patients: 15,
                    phone: "+7 (912) 123-45-67",
                    email: "smirnova@clinic.ru",
                    hireDate: "2018-03-15",
                    salary: 65000,
                    address: "—É–ª. –õ–µ—Å–Ω–∞—è, 10, –∫–≤. 25",
                    notes: "–í—ã—Å—à–∞—è –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è"
                },
                { 
                    id: 2, 
                    name: "–ö—É–∑–Ω–µ—Ü–æ–≤ –î–º–∏—Ç—Ä–∏–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", 
                    specialty: "–•–∏—Ä—É—Ä–≥", 
                    status: "vacation", 
                    patients: 8,
                    phone: "+7 (912) 234-56-78",
                    email: "kuznetsov@clinic.ru",
                    hireDate: "2019-07-22",
                    salary: 85000,
                    address: "–ø—Ä. –ú–∏—Ä–∞, 45, –∫–≤. 12",
                    notes: "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –∞–±–¥–æ–º–∏–Ω–∞–ª—å–Ω–∞—è —Ö–∏—Ä—É—Ä–≥–∏—è"
                },
                { 
                    id: 3, 
                    name: "–í–∞—Å–∏–ª—å–µ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ò–≥–æ—Ä–µ–≤–Ω–∞", 
                    specialty: "–ü–µ–¥–∏–∞—Ç—Ä", 
                    status: "available", 
                    patients: 22,
                    phone: "+7 (912) 345-67-89",
                    email: "vasileva@clinic.ru",
                    hireDate: "2017-11-05",
                    salary: 60000,
                    address: "—É–ª. –®–∫–æ–ª—å–Ω–∞—è, 3, –∫–≤. 7",
                    notes: "–ö–∞–Ω–¥–∏–¥–∞—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –Ω–∞—É–∫"
                },
                { 
                    id: 4, 
                    name: "–ü–æ–ø–æ–≤ –ê–Ω–¥—Ä–µ–π –°–µ—Ä–≥–µ–µ–≤–∏—á", 
                    specialty: "–ö–∞—Ä–¥–∏–æ–ª–æ–≥", 
                    status: "busy", 
                    patients: 12,
                    phone: "+7 (912) 456-78-90",
                    email: "popov@clinic.ru",
                    hireDate: "2020-02-18",
                    salary: 75000,
                    address: "—É–ª. –°–∞–¥–æ–≤–∞—è, 15, –∫–≤. 33",
                    notes: ""
                },
                { 
                    id: 5, 
                    name: "–§–µ–¥–æ—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞", 
                    specialty: "–ù–µ–≤—Ä–æ–ª–æ–≥", 
                    status: "available", 
                    patients: 18,
                    phone: "+7 (912) 567-89-01",
                    email: "fedorova@clinic.ru",
                    hireDate: "2019-09-30",
                    salary: 70000,
                    address: "–ø—Ä. –ü–æ–±–µ–¥—ã, 28, –∫–≤. 19",
                    notes: "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –¥–µ—Ç—Å–∫–∞—è –Ω–µ–≤—Ä–æ–ª–æ–≥–∏—è"
                },
                { 
                    id: 6, 
                    name: "–ù–æ–≤–∏–∫–æ–≤–∞ –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞", 
                    specialty: "–ú–µ–¥—Å–µ—Å—Ç—Ä–∞", 
                    status: "available", 
                    patients: 0,
                    phone: "+7 (912) 678-90-12",
                    email: "novikova@clinic.ru",
                    hireDate: "2021-05-10",
                    salary: 35000,
                    address: "—É–ª. –ú–æ–ª–æ–¥–µ–∂–Ω–∞—è, 7, –∫–≤. 14",
                    notes: "–°—Ç–∞—Ä—à–∞—è –º–µ–¥—Å–µ—Å—Ç—Ä–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è"
                }
            ];

            // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
            const staffTable = document.querySelector('#staffTable tbody');
            const addStaffBtn = document.getElementById('addStaffBtn');
            const addStaffModal = document.getElementById('addStaffModal');
            const cancelStaffBtn = document.getElementById('cancelStaffBtn');
            const saveStaffBtn = document.getElementById('saveStaffBtn');
            const saveStaffBtnText = document.getElementById('saveStaffBtnText');
            const saveStaffLoading = document.getElementById('saveStaffLoading');
            const closeBtns = document.querySelectorAll('.close-btn');
            const logoutBtn = document.getElementById('logoutBtn');
            const currentDateElement = document.getElementById('currentDate');
            const staffSearch = document.getElementById('staffSearch');
            const searchBtn = document.getElementById('searchBtn');
            const specialtyFilter = document.getElementById('specialtyFilter');
            const statusFilter = document.getElementById('statusFilter');
            const sortBy = document.getElementById('sortBy');
            const resetFiltersBtn = document.getElementById('resetFiltersBtn');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userRole = document.getElementById('userRole');
            const createScheduleBtn = document.getElementById('createScheduleBtn');
            const assignDutyBtn = document.getElementById('assignDutyBtn');
            const generateReportBtn = document.getElementById('generateReportBtn');
            const updateVacanciesBtn = document.getElementById('updateVacanciesBtn');
            const deleteStaffModal = document.getElementById('deleteStaffModal');
            const deleteStaffName = document.getElementById('deleteStaffName');
            const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

            let staffToDelete = null;
            let currentPage = 1;
            const staffPerPage = 5;

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
            function setCurrentDate() {
                const now = new Date();
                const formattedDate = now.toLocaleDateString('ru-RU');
                currentDateElement.textContent = formattedDate;
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            function loadUserData() {
                const savedName = localStorage.getItem('userName');
                const savedRole = localStorage.getItem('userRole');
                
                if (savedName) {
                    userName.textContent = savedName;
                    // –°–æ–∑–¥–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª—ã –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞
                    const initials = savedName.split(' ').map(n => n[0]).join('');
                    userAvatar.textContent = initials;
                }
                
                if (savedRole) {
                    userRole.textContent = savedRole;
                }
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –≤ localStorage
            function saveStaffToStorage() {
                localStorage.setItem('staff', JSON.stringify(staff));
            }

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
            function getFilteredAndSortedStaff() {
                let filteredStaff = [...staff];
                
                // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
                const specialtyValue = specialtyFilter.value;
                if (specialtyValue) {
                    filteredStaff = filteredStaff.filter(employee => employee.specialty === specialtyValue);
                }
                
                // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
                const statusValue = statusFilter.value;
                if (statusValue) {
                    filteredStaff = filteredStaff.filter(employee => employee.status === statusValue);
                }
                
                // –ü–æ–∏—Å–∫
                const searchTerm = staffSearch.value.toLowerCase();
                if (searchTerm) {
                    filteredStaff = filteredStaff.filter(employee => 
                        employee.name.toLowerCase().includes(searchTerm) ||
                        employee.specialty.toLowerCase().includes(searchTerm) ||
                        employee.phone.includes(searchTerm) ||
                        employee.email.toLowerCase().includes(searchTerm)
                    );
                }
                
                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
                const sortValue = sortBy.value;
                if (sortValue === 'name') {
                    filteredStaff.sort((a, b) => a.name.localeCompare(b.name));
                } else if (sortValue === 'specialty') {
                    filteredStaff.sort((a, b) => a.specialty.localeCompare(b.specialty));
                } else if (sortValue === 'patients') {
                    filteredStaff.sort((a, b) => b.patients - a.patients);
                }
                
                return filteredStaff;
            }

            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
            function renderStaff() {
                const filteredStaff = getFilteredAndSortedStaff();
                staffTable.innerHTML = '';
                
                if (filteredStaff.length === 0) {
                    staffTable.innerHTML = '<tr><td colspan="6" class="text-center" style="padding: 20px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';
                    renderPagination(0);
                    return;
                }
                
                // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
                const totalPages = Math.ceil(filteredStaff.length / staffPerPage);
                const startIndex = (currentPage - 1) * staffPerPage;
                const endIndex = startIndex + staffPerPage;
                const staffToShow = filteredStaff.slice(startIndex, endIndex);
                
                staffToShow.forEach(employee => {
                    const statusText = getStatusText(employee.status);
                    const statusClass = `status-${employee.status}`;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${employee.name}</td>
                        <td>${employee.specialty}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>${employee.patients}</td>
                        <td>
                            <div>${employee.phone}</div>
                            <div style="font-size: 0.8rem; color: var(--text-gray);">${employee.email}</div>
                        </td>
                        <td>
                            <button class="btn btn-sm btn-outline" onclick="viewStaffProfile(${employee.id})">–ü—Ä–æ—Ñ–∏–ª—å</button>
                            <button class="btn btn-sm btn-outline" onclick="editStaff(${employee.id})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button class="btn btn-sm btn-error" onclick="deleteStaff(${employee.id})">–£–¥–∞–ª–∏—Ç—å</button>
                        </td>
                    `;
                    staffTable.appendChild(row);
                });
                
                renderPagination(filteredStaff.length);
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å—Ç–∞—Ç—É—Å–∞
            function getStatusText(status) {
                switch(status) {
                    case 'available': return '–ù–∞ —Å–º–µ–Ω–µ';
                    case 'vacation': return '–í –æ—Ç–ø—É—Å–∫–µ';
                    case 'sick': return '–ù–∞ –±–æ–ª—å–Ω–∏—á–Ω–æ–º';
                    case 'busy': return '–ó–∞–Ω—è—Ç';
                    default: return status;
                }
            }

            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
            function renderPagination(totalStaff) {
                const totalPages = Math.ceil(totalStaff / staffPerPage);
                const pagination = document.getElementById('pagination');
                pagination.innerHTML = '';
                
                if (totalPages <= 1) return;
                
                // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
                const prevButton = document.createElement('button');
                prevButton.textContent = '‚Äπ';
                prevButton.disabled = currentPage === 1;
                prevButton.addEventListener('click', () => {
                    if (currentPage > 1) {
                        currentPage--;
                        renderStaff();
                    }
                });
                pagination.appendChild(prevButton);
                
                // –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
                for (let i = 1; i <= totalPages; i++) {
                    const pageButton = document.createElement('button');
                    pageButton.textContent = i;
                    pageButton.className = i === currentPage ? 'active' : '';
                    pageButton.addEventListener('click', () => {
                        currentPage = i;
                        renderStaff();
                    });
                    pagination.appendChild(pageButton);
                }
                
                // –ö–Ω–æ–ø–∫–∞ "–í–ø–µ—Ä–µ–¥"
                const nextButton = document.createElement('button');
                nextButton.textContent = '‚Ä∫';
                nextButton.disabled = currentPage === totalPages;
                nextButton.addEventListener('click', () => {
                    if (currentPage < totalPages) {
                        currentPage++;
                        renderStaff();
                    }
                });
                pagination.appendChild(nextButton);
            }

            // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
            function resetFilters() {
                specialtyFilter.value = '';
                statusFilter.value = '';
                sortBy.value = 'name';
                staffSearch.value = '';
                currentPage = 1;
                renderStaff();
                showNotification('–§–∏–ª—å—Ç—Ä—ã —Å–±—Ä–æ—à–µ–Ω—ã', 'success');
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            addStaffBtn.addEventListener('click', () => {
                addStaffModal.classList.add('active');
            });

            cancelStaffBtn.addEventListener('click', () => {
                addStaffModal.classList.remove('active');
                // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                document.getElementById('staffName').value = '';
                document.getElementById('staffSpecialty').value = '';
                document.getElementById('staffPhone').value = '';
                document.getElementById('staffEmail').value = '';
                document.getElementById('staffAddress').value = '';
                document.getElementById('staffHireDate').value = '';
                document.getElementById('staffSalary').value = '';
                document.getElementById('staffNotes').value = '';
            });

            closeBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const modal = e.target.closest('.modal');
                    modal.classList.remove('active');
                });
            });

            saveStaffBtn.addEventListener('click', () => {
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–æ—Ä–º—ã
                const name = document.getElementById('staffName').value;
                const specialty = document.getElementById('staffSpecialty').value;
                const phone = document.getElementById('staffPhone').value;
                const email = document.getElementById('staffEmail').value;
                const address = document.getElementById('staffAddress').value;
                const hireDate = document.getElementById('staffHireDate').value;
                const salary = document.getElementById('staffSalary').value;
                const notes = document.getElementById('staffNotes').value;
                
                // –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
                if (!name || !specialty || !phone || !email) {
                    showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –§–ò–û, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ email', 'error');
                    return;
                }
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                saveStaffBtnText.classList.add('hidden');
                saveStaffLoading.classList.remove('hidden');
                saveStaffBtn.disabled = true;
                
                // –ò–º–∏—Ç–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                setTimeout(() => {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                    const newStaff = {
                        id: staff.length > 0 ? Math.max(...staff.map(s => s.id)) + 1 : 1,
                        name,
                        specialty,
                        status: "available",
                        patients: 0,
                        phone,
                        email,
                        address,
                        hireDate,
                        salary,
                        notes
                    };
                    
                    staff.push(newStaff);
                    saveStaffToStorage();
                    renderStaff();
                    addStaffModal.classList.remove('active');
                    
                    // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    saveStaffBtnText.classList.remove('hidden');
                    saveStaffLoading.classList.add('hidden');
                    saveStaffBtn.disabled = false;
                    
                    // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                    document.getElementById('staffName').value = '';
                    document.getElementById('staffSpecialty').value = '';
                    document.getElementById('staffPhone').value = '';
                    document.getElementById('staffEmail').value = '';
                    document.getElementById('staffAddress').value = '';
                    document.getElementById('staffHireDate').value = '';
                    document.getElementById('staffSalary').value = '';
                    document.getElementById('staffNotes').value = '';
                    
                    showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success');
                }, 1000);
            });

            searchBtn.addEventListener('click', () => {
                currentPage = 1;
                renderStaff();
            });

            staffSearch.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    currentPage = 1;
                    renderStaff();
                }
            });

            specialtyFilter.addEventListener('change', () => {
                currentPage = 1;
                renderStaff();
            });

            statusFilter.addEventListener('change', () => {
                currentPage = 1;
                renderStaff();
            });

            sortBy.addEventListener('change', () => {
                currentPage = 1;
                renderStaff();
            });

            resetFiltersBtn.addEventListener('click', resetFilters);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
            createScheduleBtn.addEventListener('click', () => {
                showNotification('–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è', 'info');
            });

            assignDutyBtn.addEventListener('click', () => {
                showNotification('–§—É–Ω–∫—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–µ–∂—É—Ä—Å—Ç–≤–∞', 'info');
            });

            generateReportBtn.addEventListener('click', () => {
                showNotification('–§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞', 'info');
            });

            updateVacanciesBtn.addEventListener('click', () => {
                showNotification('–§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–π', 'info');
            });

            // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('userName');
                localStorage.removeItem('userRole');
                window.location.href = 'index.html';
            });

            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            cancelDeleteBtn.addEventListener('click', () => {
                deleteStaffModal.classList.remove('active');
                staffToDelete = null;
            });

            confirmDeleteBtn.addEventListener('click', () => {
                if (staffToDelete) {
                    staff = staff.filter(s => s.id !== staffToDelete);
                    saveStaffToStorage();
                    renderStaff();
                    deleteStaffModal.classList.remove('active');
                    staffToDelete = null;
                    showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω', 'success');
                }
            });

            // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
            window.viewStaffProfile = function(staffId) {
                window.location.href = `staff-details.html?id=${staffId}`;
            };

            window.editStaff = function(staffId) {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                showNotification(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å ID: ${staffId}`, 'info');
            };

            window.deleteStaff = function(staffId) {
                const employee = staff.find(s => s.id === staffId);
                if (employee) {
                    staffToDelete = staffId;
                    deleteStaffName.textContent = employee.name;
                    deleteStaffModal.classList.add('active');
                }
            };

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            setCurrentDate();
            loadUserData();
            renderStaff();
        });
    </script>
</body>
</html>